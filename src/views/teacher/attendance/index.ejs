
<!DOCTYPE html><html lang="id"><head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Kehadiran Ustadzah</title>
<link href="/public/css/output.css" rel="stylesheet" />
</head><body class="bg-gray-50">
<div class="max-w-4xl mx-auto px-4 py-6 space-y-6">
  <h1 class="text-2xl font-semibold">Kehadiran Ustadzah</h1>

  <div class="bg-white p-4 rounded shadow space-y-3">
    <div class="text-sm text-gray-600">Tanggal hari ini: <strong><%= today %></strong></div>
    <div class="text-sm">
      Status saat ini:
      <span class="font-semibold"><%= todayRow ? todayRow.status : 'Belum diisi' %></span>
      <% if (todayRow && todayRow.note) { %> â€” <span class="text-gray-600"><%= todayRow.note %></span><% } %>
    </div>

    <form method="post" action="/teacher/attendance" class="grid md:grid-cols-4 gap-3 items-end">
      <div>
        <label class="text-sm block">Status</label>
        <select name="status" class="border rounded px-3 py-2 w-full">
          <option value="hadir">Hadir</option>
          <option value="izin">Izin</option>
          <option value="sakit">Sakit</option>
          <option value="alpha">Alpha</option>
        </select>
      </div>
      <div class="md:col-span-2">
        <label class="text-sm block">Keterangan (opsional)</label>
        <input name="note" class="border rounded px-3 py-2 w-full" placeholder="contoh: mengisi kelas pengganti" />
      </div>
      <div>
        <button class="px-3 py-2 bg-green-600 text-white rounded w-full">Simpan</button>
      </div>
    </form>
  </div>

  <div class="bg-white p-4 rounded shadow">
    <h2 class="font-semibold mb-3">Riwayat 60 Hari Terakhir</h2>
    <% if (!history || history.length === 0) { %>
      <div class="text-sm text-gray-500">Belum ada data.</div>
    <% } else { %>
      <div class="overflow-x-auto">
        <table class="min-w-full text-sm">
          <thead class="bg-gray-100">
            <tr>
              <th class="text-left p-2">Tanggal</th>
              <th class="text-left p-2">Status</th>
              <th class="text-left p-2">Keterangan</th>
            </tr>
          </thead>
          <tbody>
            <% history.forEach(h => { %>
              <tr class="border-t">
                <td class="p-2"><%= h.date %></td>
                <td class="p-2"><%= h.status %></td>
                <td class="p-2"><%= h.note || '-' %></td>
              </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    <% } %>
  </div>
</div>
</body></html>
